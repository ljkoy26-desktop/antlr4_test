â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
í™˜ê²½
â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 



# 1. ìë°” ë²„ì „

C:\Users\ljkoy>java -version

openjdk version "17.0.11" 2024-04-16
OpenJDK Runtime Environment Temurin-17.0.11+9 (build 17.0.11+9)
OpenJDK 64-Bit Server VM Temurin-17.0.11+9 (build 17.0.11+9, mixed mode, sharing)






â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
vcpkg ì„¤ì¹˜
â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 


# ì§œì˜í•œ ì„¤ëª… ì—†ì´. ê°„ëµí•˜ê²Œ ì •ë¦¬í•©ë‹ˆë‹¤.


# vcpkg ë‹¤ìš´ë¡œë“œ

cd C:\Users\ljkoy\Desktop\Github_clone\antlr4_test
git clone https://github.com/microsoft/vcpkg.git

# ë¶€íŠ¸ìŠ¤íŠ¸ë© ì‹¤í–‰

cd vcpkg
.\bootstrap-vcpkg.bat






## 2. SqlParserLib í”„ë¡œì íŠ¸ ì„¤ì • í™•ì¸ (âš ï¸ ì¤‘ìš”)

**Visual Studio ì„¤ì • ê²½ë¡œ:**
`í”„ë¡œì íŠ¸` â†’ `ì†ì„±` â†’ `êµ¬ì„± ì†ì„±` â†’ `C/C++` â†’ `ì½”ë“œ ìƒì„±(Code Generation)` â†’ `ëŸ°íƒ€ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬(Runtime Library)`

### ëŸ°íƒ€ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì • ë¹„êµí‘œ
# í˜„ì¬ SqlParserLib í”„ë¡œì íŠ¸ëŠ” /MDd ë°©ì‹ ì±„íƒì¤‘

| **ë‹¤ì¤‘ ìŠ¤ë ˆë“œ DLL (/MD, /MDd)** | MFC ê¸°ë³¸ê°’. DLL ê³µìœ  ì‚¬ìš©     | `x64-windows` (ë˜ëŠ” `x86-windows`) |
| **ë‹¤ì¤‘ ìŠ¤ë ˆë“œ (/MT, /MTd)**     | Static Link. ì‹¤í–‰ íŒŒì¼ì— í¬í•¨ | `x64-windows-static` |



#### Case A: í”„ë¡œì íŠ¸ê°€ /MD (DLL) ì„¤ì •ì¸ ê²½ìš° (ê¶Œì¥) ( ë…¸íŠ¸ë¶ì—ì„œ ì‹¤í–‰ ì‹œ, ì‹œê°„ ë§¤ìš° ì˜¤ë˜ê±¸ë ¸ìŒ )

.\vcpkg install antlr4:x64-windows


#### Case B: í”„ë¡œì íŠ¸ê°€ /MT (Static) ì„¤ì •ì¸ ê²½ìš°

.\vcpkg install antlr4:x64-windows-static



### 3.2 Visual Studio í†µí•© (Integrate)
# Visual Studioê°€ ì„¤ì¹˜ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ë„ë¡ ì—°ê²°í•©ë‹ˆë‹¤. (ìµœì´ˆ 1íšŒë§Œ ìˆ˜í–‰)

.\vcpkg integrate install


**ì„±ê³µ ë©”ì‹œì§€:**
# Applied user-wide integration for this vcpkg root.











### 4.1 SQLParserLib MFC í”„ë¡œì íŠ¸ í¬í•¨ ë””ë ‰í„°ë¦¬ ì„¤ì • (Include Path)
# `í”„ë¡œì íŠ¸ ì†ì„±` â†’ `C/C++` â†’ `ì¼ë°˜` â†’ `ì¶”ê°€ í¬í•¨ ë””ë ‰í„°ë¦¬`

[vcpkgì„¤ì¹˜ê²½ë¡œ]\installed\x64-windows\include\antlr4-runtime
ì˜ˆ) $(SolutionDir)vcpkg\installed\x64-windows\include\antlr4-runtime



### 4.2 C++ ì–¸ì–´ í‘œì¤€ ì„¤ì •
# í”„ë¡œì íŠ¸ ì†ì„±` â†’ `C/C++` â†’ `ì–¸ì–´` â†’ `C++ ì–¸ì–´ í‘œì¤€`

**ê°’ ë³€ê²½:**
 ISO C++17 í‘œì¤€(/std:c++17)


 
### 4.3 Windows ë§¤í¬ë¡œ ì¶©ëŒ í•´ê²° (ì½”ë“œ ìˆ˜ì •)

Windows/MFCì˜ `min`, `max`, `ERROR` ë§¤í¬ë¡œê°€ ANTLRì™€ ì¶©ëŒí•˜ë¯€ë¡œ, ANTLR í—¤ë”ë¥¼ í¬í•¨í•˜ê¸° ì „ì— ë°˜ë“œì‹œ í•´ì œí•´ì•¼ í•©ë‹ˆë‹¤.

**ì‚¬ìš© ì˜ˆì‹œ (Dlg.cpp ë˜ëŠ” Proxy Header):**

# cpp ì— ì¶”ê°€ 

#include "pch.h"

# ... MFC ê´€ë ¨ í—¤ë”ë“¤ ...
# [ì¤‘ìš”] ANTLR í—¤ë” í¬í•¨ ì „ ë§¤í¬ë¡œ í•´ì œ

#undef min
#undef max
#undef ERROR
#undef NO_ERROR

#include <antlr4-runtime.h>  // ë˜ëŠ” <antlr4-runtime/antlr4-runtime.h>


â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
Grammer ë¥¼ ì‚¬ìš©í•˜ì—¬ cpp, h íŒŒì¼ ìƒì„±
â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 

# 3. grammer.f4 íŒŒì¼ ë‹¤ìš´ë¡œë“œ 

Lexerì™€ Parser ë‘˜ ë‹¤ í•„ìš”í•©ë‹ˆë‹¤: 
ëŒ€ë¶€ë¶„ì˜ SQL ë¬¸ë²•ì€ íŒŒì¼ì´ ë‘ ê°œ(xxxLexer.g4, xxxParser.g4)ë¡œ ë‚˜ë‰˜ì–´ ìˆìŠµë‹ˆë‹¤.
í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ì•ˆ ë˜ë‹ˆ ê¼­ ë‘ íŒŒì¼ ëª¨ë‘ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.


Oracle (PL/SQL) ğŸ‘‰ https://github.com/antlr/grammars-v4/tree/master/sql/plsql

ë‹¤ìš´ë¡œë“œ ëŒ€ìƒ: PlSqlLexer.g4, PlSqlParser.g4 (ë‘˜ ë‹¤ ë°›ìœ¼ì„¸ìš”)

MS SQL Server (T-SQL) ğŸ‘‰ https://github.com/antlr/grammars-v4/tree/master/sql/tsql

ë‹¤ìš´ë¡œë“œ ëŒ€ìƒ: TSqlLexer.g4, TSqlParser.g4

MySQL ğŸ‘‰ https://github.com/antlr/grammars-v4/tree/master/sql/mysql


ì£¼ì˜: ì´ í´ë” ì•ˆì— ë“¤ì–´ê°€ë©´ Oracle ë²„ì „ê³¼ Positive-Technologies ë²„ì „ í´ë”ê°€ ë˜ ìˆìŠµë‹ˆë‹¤. ë³´í†µ Oracle í´ë” ì•ˆì— ìˆëŠ” ê²ƒì´ ê³µì‹ì— ê°€ê¹ìŠµë‹ˆë‹¤.

https://github.com/antlr/grammars-v4/tree/master/sql/mysql/Oracle


PostgreSQL ğŸ‘‰ https://github.com/antlr/grammars-v4/tree/master/sql/postgresql

ë‹¤ìš´ë¡œë“œ ëŒ€ìƒ: PostgreSQLLexer.g4, PostgreSQLParser.g4




 
# 4. grammer.g4 íŒŒì¼ì„ ì´ìš©í•œ ë¹Œë“œ 



DB ì¢…ë¥˜,ì§€ì› ì—¬ë¶€,ì‚¬ìš©í•  íŒŒì¼ (.g4),ì„¤ëª…

Oracle,     âœ… ì™„ë²½,    plsql,ê°€ì¥ í™œë°œíˆ ê´€ë¦¬ë¨. ê±°ì˜ ì™„ë²½ ì§€ì›.
SQL Server, âœ… ì™„ë²½,    tsql,Microsoft T-SQL ë¬¸ë²•. ë§¤ìš° ì˜ ë˜ì–´ ìˆìŒ.
MySQL,      âœ… ì™„ë²½,    mysql,Oracle MySQL ë²„ì „ ê¸°ì¤€.
PostgreSQL, âœ… ì™„ë²½,    postgresql,ë§¤ìš° ìƒì„¸í•˜ê²Œ êµ¬í˜„ë˜ì–´ ìˆìŒ.
Tibero,     âš ï¸ ëŒ€ì²´,    plsql (Oracle),í‹°ë² ë¡œëŠ” ì˜¤ë¼í´ í˜¸í™˜ì„±ì´ ëª©í‘œì¸ DBë¼ plsql ë¬¸ë²•ì„ ì“°ë©´ 95% ì´ìƒ íŒŒì‹±ë©ë‹ˆë‹¤.
Sybase ASE, âš ï¸ ëŒ€ì²´,    tsql (MSSQL),Sybaseì™€ MSSQLì€ ë¿Œë¦¬ê°€ ê°™ìŠµë‹ˆë‹¤. tsql ë¬¸ë²•ì„ ì“°ë©´ ëŒ€ë¶€ë¶„ í˜¸í™˜ë©ë‹ˆë‹¤.
Vertica,    âš ï¸ ëŒ€ì²´,    postgresql,VerticaëŠ” í¬ìŠ¤íŠ¸ê·¸ë ˆ ê¸°ë°˜ì…ë‹ˆë‹¤. postgresql ë¬¸ë²•ì„ ìˆ˜ì •í•´ì„œ ì¨ì•¼ í•©ë‹ˆë‹¤.
Sybase IQ,  âŒ ì—†ìŒ,    tsql + ìˆ˜ì •,ASEì™€ ë‹¬ë¦¬ ë¶„ì„í˜•ì´ë¼ ë¬¸ë²•ì´ ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤. tsqlì„ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
DB2,        âŒ ì—†ìŒ,    (ì§ì ‘ êµ¬í˜„),ì˜ì™¸ë¡œ ê³µê°œëœ ì™„ë²½í•œ ANTLR4 ë¬¸ë²•ì´ ì—†ìŠµë‹ˆë‹¤. (ë¶€ë¶„ì ì¸ ìë£Œë§Œ ì¡´ì¬)
Altibase,   âŒ ì—†ìŒ,    (ì§ì ‘ êµ¬í˜„),êµ­ì‚° DBë¼ í•´ì™¸ ë¦¬í¬ì§€í† ë¦¬ì— ì—†ìŠµë‹ˆë‹¤. í‘œì¤€ SQL ë¬¸ë²•ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.



# ì¼ê´„ ìƒì„± ì˜ˆì œì½”ë“œ 

cd H:\Source\GithubDesktop\antlr4_test\Grammer
h:

C:\Users\ljkoy\Desktop\Github_clone\antlr4_test\Grammer

java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o oracle_gen PlSqlLexer.g4
java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o oracle_gen PlSqlParser.g4

		  
java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o sqlserver_gen TSqlLexer.g4
java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o sqlserver_gen TSqlParser.g4
		  		  
		  
java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o mysql_gen MySQLLexer.g4
java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o mysql_gen MySQLParser.g4
		  
		  
java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o postgres_gen PostgreSQLLexer.g4
java -jar antlr-4.13.2-complete.jar -Dlanguage=Cpp -package antlrcpptest -no-listener -visitor -o postgres_gen PostgreSQLParser.g4






â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
SQLParserLib ë¹Œë“œ 
â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 


# 2. êµ¬í˜„ ê°€ì´ë“œ (Step-by-Step)


1ë‹¨ê³„: íŒŒì„œ ì „ìš© í”„ë¡œì íŠ¸ ( SQLParserLib ) ë§Œë“¤ê¸°

- êµ¬ì„±ì†ì„± -> ì¼ë°˜ -> êµ¬ì„± í˜•ì‹ ( ì •ì  ë¼ì´ë¸ŒëŸ¬ë¦¬(.lib) ) 
- êµ¬ì„±ì†ì„± -> ì¼ë°˜ -> C++ ì–¸ì–´í‘œì¤€ ( C++ 17 )
- C/C++ -> ë¯¸ë¦¬ ì»´íŒŒì¼ëœ í—¤ë” -> ë¯¸ë¦¬ ì»´íŒŒì¼ëœ í—¤ë” ( ì²´í¬ í•´ì œ )
- C/C++ -> ì½”ë“œ ìƒì„± -> ë‹¤ì¤‘ ìŠ¤ë ˆë“œ ë””ë²„ê·¸ DLL(/MDd) , ë‹¤ì¤‘ ìŠ¤ë ˆë“œ DLL(/MD)
- C/C++ -> ì¼ë°˜ -> ì¶”ê°€ í¬í•¨ ë””ë ‰í„°ë¦¬

# ì•„ë˜ ì˜ ì°¸ê³ í•´ì„œ ì¶”ê°€ í•˜ì„¸ìš”

# âš ï¸ ì¤‘ìš” ì˜µì…˜ ì¶”ê°€: PL/SQL íŒŒì„œê°€ ë„ˆë¬´ ì»¤ì„œ ì»´íŒŒì¼ëŸ¬ê°€ ë»—ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
C/C++ -> ëª…ë ¹ì¤„(Command Line) -> ì¶”ê°€ ì˜µì…˜ì— ì•„ë˜ ì…ë ¥   (ì´ê±° ì•ˆ í•˜ë©´ C1128 ì—ëŸ¬ ë‚¨)
/bigobj


<AdditionalIncludeDirectories>
$(ProjectDir)Source\Oracle;
$(ProjectDir)Source\SQLServer;
$(ProjectDir)Source\MySQL;
$(ProjectDir)Source\PostgreSQL;
$(SolutionDir)vcpkg\installed\x64-windows\include\antlr4-runtime
</AdditionalIncludeDirectories>

2ë‹¨ê³„: ìƒì„±ëœ íŒŒì¼ ì˜®ê¸°ê¸°

1ë‹¨ê³„ ì—ì„œ ì„¤ì •í•œ íŒŒì¼ë“¤ ( (Oracle, TSQL, MySQL, PG)ì˜ .h, .cpp íŒŒì¼ë“¤ ) 
ëª½ë•… SqlParserLib í”„ë¡œì íŠ¸ í´ë”ë¡œ ì˜®ê¸°ê³  ì¶”ê°€í•©ë‹ˆë‹¤.






â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
ë©”ì¸ MFC ëŒ€í™”ìƒì í”„ë¡œì íŠ¸ ( ANTLR4TEST í”„ë¡œì íŠ¸ ) ì„¤ì •
â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 


# ANTLR4TEST í”„ë¡œì íŠ¸ ì†ì„± ì„¤ì • 


- C/C++ -> ì¼ë°˜ -> ì¶”ê°€ í¬í•¨ ë””ë ‰í„°ë¦¬

# ì˜ˆì „êº¼
$(SolutionDir)SqlParserLib\Source;$(SolutionDir)vcpkg\installed\x64-windows\include\antlr4-runtime;








# (ê³µí†µ ì‚¬ìš© í—¤ë”íŒŒì¼ì¸ ) antlrproxy.h ì— ì•„ë˜ë‚´ìš© ì¶”ê°€ ( MySQL ë§Œ ì‘ì—…ëœ ìƒíƒœì¸ ê²½ìš° )  

#pragma once

// 1. Windows ë§¤í¬ë¡œ ì¶©ëŒ ë°©ì§€
#undef min
#undef max
#undef ERROR
#undef NO_ERROR

// 2. ANTLR ëŸ°íƒ€ì„ í—¤ë”
#include <antlr4-runtime.h>

// 3. ë¶€ëª¨ í´ë˜ìŠ¤ë“¤ (Base í´ë˜ìŠ¤)
#include "MySQL/MySQLLexerBase.h"
#include "MySQL/MySQLParserBase.h"

// 4. ë ‰ì„œì™€ íŒŒì„œ (ë°˜ë“œì‹œ Parserê°€ Visitorë³´ë‹¤ ë¨¼ì €!)
#include "MySQL/MySQLLexer.h"
#include "MySQL/MySQLParser.h"

// 5. ë¹„ì§€í„° (í•„ìš”í•œ ê²½ìš°ì—ë§Œ Parser ë’¤ì— ìœ„ì¹˜)
// ì£¼ì˜: Parser.hê°€ ì™„ì „íˆ ì •ì˜ëœ í›„ì—ë§Œ Visitorë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.
#include "MySQL/MySQLParserVisitor.h"
#include "MySQL/MySQLParserBaseVisitor.h"


# 1. CPP ì— ì½”ë“œ ì¶”ê°€ 

// ëª¨ë“  ANTLR ê´€ë ¨ ì„¤ì •ì€ ì´ í•˜ë‚˜ë¡œ ëëƒ…ë‹ˆë‹¤.
#include "../Common/Include/AntlrProxy.h"

// ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚¬ìš©
using namespace antlr4;
using namespace antlrcpptest;



# 1.2 ì„ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ( ë¯¸ì™„ì„±  )

void CANTLR4TESTDlg::OnBnClickedButtonParse()
{
	// 1. UIì—ì„œ SQL ê°€ì ¸ì˜¤ê¸°

	CString strInput;
	GetDlgItemText(IDC_EDIT_SQL, strInput);

	// CString -> std::string ë³€í™˜ (ANTLRëŠ” std::stringì„ ì”ë‹ˆë‹¤)
	std::string sqlQuery = CT2A(strInput);

	if (sqlQuery.empty()) {
		AfxMessageBox(_T("SQLì„ ì…ë ¥í•´ì£¼ì„¸ìš”."));
		return;
	}

	try {
		// 2. ANTLR íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
		ANTLRInputStream input(sqlQuery);

		// Lexer (í† í° ë¶„ë¦¬)
		MySQLLexer lexer(&input);
		CommonTokenStream tokens(&lexer);

		// Parser (êµ¬ì¡° ë¶„ì„)
		MySQLParser parser(&tokens);

		// [ì¤‘ìš”] ì—ëŸ¬ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (ì½˜ì†” ì—ëŸ¬ ë°©ì§€)
		parser.removeErrorListeners();
		// í•„ìš”í•˜ë©´ ì»¤ìŠ¤í…€ ì—ëŸ¬ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

		// 3. íŒŒì‹± ì‹œì‘ (MySQL ë¬¸ë²•ì˜ ìµœìƒìœ„ ê·œì¹™ í˜¸ì¶œ)
		// ë³´í†µ 'query', 'root', 'sqlStatements' ë“±ì´ ìµœìƒìœ„ì…ë‹ˆë‹¤.
		// MySQLParser.hë¥¼ ì—´ì–´ë³´ë©´ ìµœìƒìœ„ í•¨ìˆ˜ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
		// ì—¬ê¸°ì„œëŠ” ì˜ˆì‹œë¡œ 'query()' ë˜ëŠ” 'root()'ë¥¼ ê°€ì •í•©ë‹ˆë‹¤.

		// â˜… .g4 íŒŒì¼ í™•ì¸ ê²°ê³¼ MySQL ìµœìƒìœ„ëŠ” ë³´í†µ 'query' ë˜ëŠ” 'sqlStatements' ì…ë‹ˆë‹¤.
		// ìë™ì™„ì„±ìœ¼ë¡œ parser. ì¹˜ê³  ë‚˜ì˜¤ëŠ” í•¨ìˆ˜ ì¤‘ ê°€ì¥ ê·¸ëŸ´ì‹¸í•œ ê²ƒì„ ê³ ë¥´ì„¸ìš”.
		MySQLParser::QueryContext* tree = parser.query();

		// 4. ê²°ê³¼ í™•ì¸
		size_t errorCount = parser.getNumberOfSyntaxErrors();

		if (errorCount == 0)
		{
			std::string s = tree->toStringTree(&parser);
			CStringA sTraceA = s.c_str();
			CString sTrace = (CString)sTraceA;

			AddTraceLog(sTrace);
		}
		else
		{
			std::string s = tree->toStringTree(&parser);
			CStringA sTraceA = s.c_str();

			CString sTrace;
			sTrace.Format(_T("íŒŒì‹± ì‹¤íŒ¨..\nì˜¤ë¥˜ ê°œìˆ˜: %d"), errorCount);
			AddTraceLog(sTrace);
		}
	}
	catch (const std::exception& e) {
		// C++ í‘œì¤€ ì˜ˆì™¸ ì²˜ë¦¬
		CString msg;
		msg.Format(_T("Exception ë°œìƒ: %s"), CString(e.what()));
		AfxMessageBox(msg);
	}
	catch (...) {
		AfxMessageBox(_T("ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ ë°œìƒ"));
	}
}

void CANTLR4TESTDlg::AddTraceLog(LPCTSTR lpszFormat, ...)
{
	// 1. ê°€ë³€ ì¸ì ë¬¸ìì—´ êµ¬ì„±
	CString strLog;
	va_list args;
	va_start(args, lpszFormat);
	strLog.FormatV(lpszFormat, args);
	va_end(args);

	strLog += _T("\r\n");

	// 2. ì»¨íŠ¸ë¡¤ í¬ì¸í„° ê°€ì ¸ì˜¤ê¸° ë° ì•ˆì „ì„± ê²€ì‚¬
	CEdit* pEditTrace = (CEdit*)GetDlgItem(IDC_EDIT_TRACE);
	if (pEditTrace == nullptr) return; // ì»¨íŠ¸ë¡¤ì„ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ ì¤‘ë‹¨

	// 3. ì»¤ì„œë¥¼ ë§ˆì§€ë§‰ ìœ„ì¹˜ë¡œ ì´ë™
	int nLength = pEditTrace->GetWindowTextLength();
	pEditTrace->SetSel(nLength, nLength);

	// 4. ì„ íƒ ì˜ì—­ì— í…ìŠ¤íŠ¸ ì‚½ì…
	pEditTrace->ReplaceSel(strLog);

	// 5. ìŠ¤í¬ë¡¤ì„ ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ë™ (WM_ ì¶”ê°€)
	pEditTrace->SendMessage(WM_VSCROLL, SB_BOTTOM, NULL);
}




